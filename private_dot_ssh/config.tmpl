Host *
{{- if eq .chezmoi.os "darwin" }}
  UseKeychain yes
{{- end }}
  AddKeysToAgent yes
  ServerAliveInterval 120
  TCPKeepAlive no
  ForwardAgent yes

{{ if eq .org "teradata" -}}
Host github-personal
  IdentityFile ~/.ssh/github
  IdentitiesOnly yes
  User git
  HostName github.com
  UseKeychain yes
{{ end -}}

{{ if eq .chezmoi.os "darwin" }}
Host buster
  ProxyCommand ssh localhost -W localhost:`kubectl get svc buster-devbox -o=go-template --template '{{ `{{ range .spec.ports }}{{.nodePort}}{{end}}` }}'` 

Host alma
  ProxyCommand ssh localhost -W localhost:`kubectl get svc alma-devbox -o=go-template --template '{{ `{{ range .spec.ports }}{{.nodePort}}{{end}}` }}'` 

Host alpine
  ProxyCommand ssh localhost -W localhost:`kubectl get svc alpine-devbox -o=go-template --template '{{ `{{ range .spec.ports }}{{.nodePort}}{{end}}` }}'` 

Host bullseye
  ProxyCommand ssh localhost -W localhost:`kubectl get svc bullseye-devbox -o=go-template --template '{{ `{{ range .spec.ports }}{{.nodePort}}{{end}}` }}'` 
{{ end }}  
